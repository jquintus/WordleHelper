@page "/"
@using WordleSolver.Models;
@using WordleSolver.Services;

<PageTitle>Wordle Solver</PageTitle>

Hello world

<EditForm Model=@Model OnSubmit="@AddWord">
	<InputText id="name" @bind-Value="@Model.Word" />

	<button type="submit">Submit</button>

	<h1> Guesses </h1>
	<table>
		<tbody>
			@foreach (var guess in Model.Guesses)
			{
				<tr>
					<td>
						@foreach (var letter in guess.Letters)
						{
							<button @onclick=letter.ToggleState
			   style="background-color:@letter.Color"
			   class="letterButton">
								@letter
							</button>
						}
					</td>
				</tr>
			}
		</tbody>
	</table>

	<br />
	<button @onclick=@GenerateSuggestions class="generateButton"> Generate </button>
	<h1> Suggestions </h1>

	<table>
		<tbody>
			@foreach (var suggestion in Model.Suggestions)
			{
				<tr>
					<td>@suggestion</td>
				</tr>
			}
		</tbody>

		<br />
		<br />

		<button @onclick=@Reset class="clearButton"> Clear </button>
	</table>
</EditForm>



@code {
	private InputModel Model { get; set; } = new(new Wordlizer());
	private void AddWord()
	{
		Model.AddGuess(Model.Word);
		Model.Word = string.Empty;
	}

	private void Reset() => Model.Reset();
	private void GenerateSuggestions() => Model.GenerateSuggestions();
}